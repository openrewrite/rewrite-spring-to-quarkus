#
# Copyright 2025 the original author or authors.
# <p>
# Licensed under the Moderne Source Available License (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# <p>
# https://docs.moderne.io/licensing/moderne-source-available-license
# <p>
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

---
type: specs.openrewrite.org/v1beta/recipe
name: org.openrewrite.quarkus.spring.MigrateDatabaseDrivers
displayName: Migrate database drivers to Quarkus JDBC extensions
description: Replaces Spring Boot database driver dependencies with their Quarkus JDBC extension equivalents.
tags:
  - spring
  - quarkus
  - database
  - jdbc
recipeList:
  - org.openrewrite.quarkus.spring.H2DriverToQuarkus
  - org.openrewrite.quarkus.spring.H2TestDriverToQuarkus
  - org.openrewrite.quarkus.spring.DerbyDriverToQuarkus
  - org.openrewrite.quarkus.spring.DerbyTestDriverToQuarkus
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.postgresql
      oldArtifactId: postgresql
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-postgresql
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-postgresql
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: com.mysql
      oldArtifactId: mysql-connector-j
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-mysql
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-mysql
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: mysql
      oldArtifactId: mysql-connector-java
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-mysql
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-mysql
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: org.mariadb.jdbc
      oldArtifactId: mariadb-java-client
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-mariadb
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-mariadb
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: com.oracle.database.jdbc
      oldArtifactId: ojdbc8
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-oracle
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-oracle
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: com.oracle.database.jdbc
      oldArtifactId: ojdbc10
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-oracle
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-oracle
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: com.oracle.database.jdbc
      oldArtifactId: ojdbc11
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-oracle
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-oracle
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: com.oracle.ojdbc
      oldArtifactId: ojdbc8
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-oracle
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-oracle
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: com.microsoft.sqlserver
      oldArtifactId: mssql-jdbc
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-mssql
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-mssql
  - org.openrewrite.java.dependencies.ChangeDependency:
      oldGroupId: com.ibm.db2
      oldArtifactId: jcc
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-db2
      newVersion: x
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-db2
  - org.openrewrite.maven.RemoveRedundantDependencyVersions:
      groupPattern: io.quarkus
      artifactPattern: "*"
      onlyIfManagedVersionIs: ANY

---
type: specs.openrewrite.org/v1beta/recipe
name: org.openrewrite.quarkus.spring.H2DriverToQuarkus
displayName: Replace H2 driver with Quarkus JDBC H2
description: Migrates `com.h2database:h2` to `io.quarkus:quarkus-jdbc-h2` (excludes test scope)
tags:
  - spring
  - quarkus
  - database
  - h2
preconditions:
  - org.openrewrite.maven.search.DependencyInsight:
      groupIdPattern: com.h2database
      artifactIdPattern: h2
      onlyDirect: true
      scope: compile
recipeList:
  - org.openrewrite.java.dependencies.ChangeDependency:
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-h2
      newVersion: x
      oldGroupId: com.h2database
      oldArtifactId: h2
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-h2

---
type: specs.openrewrite.org/v1beta/recipe
name: org.openrewrite.quarkus.spring.H2TestDriverToQuarkus
displayName: Replace H2 test driver with Quarkus JDBC H2 (test scope)
description: Migrates `com.h2database:h2` with test scope to `io.quarkus:quarkus-jdbc-h2` with test scope
tags:
  - spring
  - quarkus
  - database
  - h2
  - test
preconditions:
  - org.openrewrite.maven.search.DependencyInsight:
      groupIdPattern: com.h2database
      artifactIdPattern: h2
      onlyDirect: true
      scope: test
recipeList:
  - org.openrewrite.maven.RemoveDependency:
      groupId: com.h2database
      artifactId: h2
      scope: test
  - org.openrewrite.maven.AddDependency:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-h2
      version: x
      scope: test

---
type: specs.openrewrite.org/v1beta/recipe
name: org.openrewrite.quarkus.spring.DerbyDriverToQuarkus
displayName: Replace Derby driver with Quarkus JDBC Derby
description: Migrates `org.apache.derby:derby` or `derbyclient` to `io.quarkus:quarkus-jdbc-derby` (excludes test scope)
tags:
  - spring
  - quarkus
  - database
  - derby
preconditions:
  - org.openrewrite.maven.search.DependencyInsight:
      groupIdPattern: org.apache.derby
      artifactIdPattern: derby*
      onlyDirect: true
recipeList:
  - org.openrewrite.java.dependencies.ChangeDependency:
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-derby
      newVersion: x
      oldGroupId: org.apache.derby
      oldArtifactId: derby
  - org.openrewrite.java.dependencies.ChangeDependency:
      newGroupId: io.quarkus
      newArtifactId: quarkus-jdbc-derby
      newVersion: x
      oldGroupId: org.apache.derby
      oldArtifactId: derbyclient
  - org.openrewrite.maven.ChangeDependencyScope:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-derby

---
type: specs.openrewrite.org/v1beta/recipe
name: org.openrewrite.quarkus.spring.DerbyTestDriverToQuarkus
displayName: Replace Derby test driver with Quarkus JDBC Derby (test scope)
description: Migrates `org.apache.derby:derby` with test scope to `io.quarkus:quarkus-jdbc-derby` with test scope
tags:
  - spring
  - quarkus
  - database
  - derby
  - test
preconditions:
  - org.openrewrite.maven.search.DependencyInsight:
      groupIdPattern: org.apache.derby
      artifactIdPattern: derby|derbyclient
      onlyDirect: true
      scope: test
recipeList:
  - org.openrewrite.maven.RemoveDependency:
      groupId: org.apache.derby
      artifactId: derby
      scope: test
  - org.openrewrite.maven.RemoveDependency:
      groupId: org.apache.derby
      artifactId: derbyclient
      scope: test
  - org.openrewrite.maven.AddDependency:
      groupId: io.quarkus
      artifactId: quarkus-jdbc-derby
      version: x
      scope: test
