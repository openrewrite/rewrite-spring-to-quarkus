# Copyright 2025 the original author or authors.
# <p>
# Licensed under the Moderne Source Available License (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
# <p>
# https://docs.moderne.io/licensing/moderne-source-available-license
# <p>
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.AddSpringCompatibilityExtensions
examples:
- description: '`AddSpringCompatibilityExtensionsTest#addSpringCompatibilityExtensionsForCommonAnnotations`'
  sources:
  - before: |
      import org.springframework.stereotype.Service;
      import org.springframework.beans.factory.annotation.Autowired;
      import org.springframework.data.repository.Repository;

      @Service
      class DemoService {

          @Autowired
          private Repository<?,?> repository;

          public void doSomething() {
              // business logic
          }
      }
    language: java
  - before: |
      import org.springframework.stereotype.Service;
      import org.springframework.web.bind.annotation.RestController;
      import org.springframework.web.bind.annotation.GetMapping;

      @RestController
      class DemoController {

          @GetMapping("/hello")
          public String hello() {
              return "Hello World";
          }
      }
    language: java
  - before: project
    language: mavenProject
  - before: |
      <project>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.26.4</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
      </project>
    after: |
      <project>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.26.4</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
          <dependencies>
              <dependency>
                  <groupId>io.quarkus</groupId>
                  <artifactId>quarkus-spring-di</artifactId>
              </dependency>
              <dependency>
                  <groupId>io.quarkus</groupId>
                  <artifactId>quarkus-spring-web</artifactId>
              </dependency>
          </dependencies>
      </project>
    path: pom.xml
    language: xml
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.EnableAnnotationsToQuarkusDependencies
examples:
- description: '`EnableAnnotationsToQuarkusDependenciesTest#convertEnableSchedulingToQuarkusScheduler`'
  sources:
  - before: |
      import org.springframework.scheduling.annotation.EnableScheduling;

      @EnableScheduling
      class SchedulingConfig {
      }
    after: |
      class SchedulingConfig {
      }
    language: java
  - before: project
    language: mavenProject
  - before: |
      <project>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.26.4</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
      </project>
    after: |
      <project>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.26.4</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
          <dependencies>
              <dependency>
                  <groupId>io.quarkus</groupId>
                  <artifactId>quarkus-scheduler</artifactId>
              </dependency>
          </dependencies>
      </project>
    path: pom.xml
    language: xml
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.MigrateBootStarters
examples:
- description: '`MigrateBootStartersTest#migrateWebWithoutReactor`'
  sources:
  - before: |
      <project>
          <parent>
              <groupId>org.springframework.boot</groupId>
              <artifactId>spring-boot-starter-parent</artifactId>
              <version>3.1.0</version>
              <relativePath/>
          </parent>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.26.4</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
          <dependencies>
              <dependency>
                  <groupId>org.springframework.boot</groupId>
                  <artifactId>spring-boot-starter-web</artifactId>
              </dependency>
          </dependencies>
      </project>
    after: |
      <project>
          <parent>
              <groupId>org.springframework.boot</groupId>
              <artifactId>spring-boot-starter-parent</artifactId>
              <version>3.1.0</version>
              <relativePath/>
          </parent>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.26.4</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
          <dependencies>
              <dependency>
                  <groupId>io.quarkus</groupId>
                  <artifactId>quarkus-resteasy-jackson</artifactId>
              </dependency>
          </dependencies>
      </project>
    path: pom.xml
    language: xml
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.MigrateDatabaseDrivers
examples:
- description: '`MigrateDatabaseDriversTest#migratePostgreSQLDriver`'
  sources:
  - before: |
      <project>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.26.4</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
          <dependencies>
              <dependency>
                  <groupId>org.postgresql</groupId>
                  <artifactId>postgresql</artifactId>
                  <version>42.7.7</version>
                  <scope>runtime</scope>
              </dependency>
          </dependencies>
      </project>
    after: |
      <project>
          <modelVersion>4.0.0</modelVersion>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.26.4</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
          <dependencies>
              <dependency>
                  <groupId>io.quarkus</groupId>
                  <artifactId>quarkus-jdbc-postgresql</artifactId>
              </dependency>
          </dependencies>
      </project>
    path: pom.xml
    language: xml
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.MigrateMavenPlugin
examples:
- description: '`MigrateMavenPluginTest#replaceSpringBootMavenPlugin`'
  sources:
  - before: |
      <project>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.2.5.Final</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
          <build>
              <plugins>
                  <plugin>
                      <groupId>org.springframework.boot</groupId>
                      <artifactId>spring-boot-maven-plugin</artifactId>
                      <version>3.1.0</version>
                  </plugin>
              </plugins>
          </build>
      </project>
    after: |
      <project>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <dependencyManagement>
              <dependencies>
                  <dependency>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-bom</artifactId>
                      <version>3.2.5.Final</version>
                      <type>pom</type>
                      <scope>import</scope>
                  </dependency>
              </dependencies>
          </dependencyManagement>
          <build>
              <plugins>
                  <plugin>
                      <groupId>io.quarkus.platform</groupId>
                      <artifactId>quarkus-maven-plugin</artifactId>
                      <version>3.2.5.Final</version>
                  </plugin>
              </plugins>
          </build>
      </project>
    path: pom.xml
    language: xml
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.RemoveSpringBootParent
examples:
- description: '`RemoveSpringBootParentTest#removeSpringBootParent`'
  sources:
  - before: |
      <project>
          <modelVersion>4.0.0</modelVersion>

          <parent>
              <groupId>org.springframework.boot</groupId>
              <artifactId>spring-boot-starter-parent</artifactId>
              <version>3.1.0</version>
              <relativePath/>
          </parent>

          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>

          <dependencies>
              <dependency>
                  <groupId>org.springframework.boot</groupId>
                  <artifactId>spring-boot-starter-web</artifactId>
              </dependency>
          </dependencies>
      </project>
    after: |
      <project>
          <modelVersion>4.0.0</modelVersion>

          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>

          <dependencies>
              <dependency>
                  <groupId>org.springframework.boot</groupId>
                  <artifactId>spring-boot-starter-web</artifactId>
              </dependency>
          </dependencies>
      </project>
    path: pom.xml
    language: xml
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.ReplaceSpringBootApplication
examples:
- description: '`ReplaceSpringBootApplicationTest#replaceSpringBootApplicationAndUpdateMainMethod`'
  sources:
  - before: |
      package com.example;

      import org.springframework.boot.SpringApplication;
      import org.springframework.boot.autoconfigure.SpringBootApplication;

      @SpringBootApplication
      public class DemoApplication {
          public static void main(String[] args) {
              SpringApplication.run(DemoApplication.class, args);
          }
      }
    after: |
      package com.example;

      import io.quarkus.runtime.Quarkus;
      import io.quarkus.runtime.annotations.QuarkusMain;

      @QuarkusMain
      public class DemoApplication {
          public static void main(String[] args) {
              Quarkus.run(args);
          }
      }
    language: java
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.ResponseEntityToJaxRsResponse
examples:
- description: '`ResponseEntityToJaxRsResponseTest#ok`'
  sources:
  - before: |
      import org.springframework.http.ResponseEntity;
      import org.springframework.web.bind.annotation.GetMapping;
      import org.springframework.web.bind.annotation.RestController;

      @RestController
      class ProductController {
          @GetMapping("/products/{id}")
          ResponseEntity<Product> getProduct() {
              Product product = new Product();
              return ResponseEntity.ok(product);
          }
      }

      class Product {
          String name;
      }
    after: |
      import jakarta.ws.rs.core.Response;
      import org.springframework.web.bind.annotation.GetMapping;
      import org.springframework.web.bind.annotation.RestController;

      @RestController
      class ProductController {
          @GetMapping("/products/{id}")
          Response<Product> getProduct() {
              Product product = new Product();
              return Response.ok(product);
          }
      }

      class Product {
          String name;
      }
    language: java
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.SpringApplicationRunToQuarkusRun
examples:
- description: '`SpringApplicationRunToQuarkusRunTest#replaceSpringApplicationRun`'
  sources:
  - before: |
      package com.example;

      import org.springframework.boot.SpringApplication;
      import org.springframework.boot.autoconfigure.SpringBootApplication;

      @SpringBootApplication
      public class DemoApplication {
          public static void main(String[] args) {
              SpringApplication.run(DemoApplication.class, args);
          }
      }
    after: |
      package com.example;

      import io.quarkus.runtime.Quarkus;
      import org.springframework.boot.autoconfigure.SpringBootApplication;

      @SpringBootApplication
      public class DemoApplication {
          public static void main(String[] args) {
              Quarkus.run(args);
          }
      }
    language: java
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.SpringBeanToCdiProduces
examples:
- description: '`SpringBeanToCdiProducesTest#migrateBeanToProduces`'
  sources:
  - before: |
      import org.springframework.context.annotation.Bean;
      import org.springframework.web.client.RestTemplate;

      class AppConfig {
          @Bean
          RestTemplate restTemplate() {
              return new RestTemplate();
          }
      }
    after: |
      import jakarta.enterprise.context.ApplicationScoped;
      import jakarta.enterprise.inject.Produces;
      import org.springframework.web.client.RestTemplate;

      class AppConfig {
          @Produces
          @ApplicationScoped
          RestTemplate restTemplate() {
              return new RestTemplate();
          }
      }
    language: java
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.SpringBootToQuarkus
examples:
- description: '`SpringBootToQuarkusTest#migrateSpringBootParentToQuarkusBOM`'
  sources:
  - before: project
    language: mavenProject
  - before: |
      <project>
          <parent>
              <groupId>org.springframework.boot</groupId>
              <artifactId>spring-boot-starter-parent</artifactId>
              <version>3.1.0</version>
          </parent>
          <groupId>com.example</groupId>
          <artifactId>demo</artifactId>
          <version>0.0.1-SNAPSHOT</version>
          <properties>
              <java.version>17</java.version>
          </properties>
          <dependencies>
              <dependency>
                  <groupId>org.springframework.boot</groupId>
                  <artifactId>spring-boot-starter-web</artifactId>
              </dependency>
          </dependencies>
      </project>
    path: pom.xml
    language: xml
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.StereotypeAnnotationsToCDI
examples:
- description: '`SpringAnnotationsToCdiTest#migrateConfigurationWithBeans`'
  sources:
  - before: |
      import org.springframework.context.annotation.Bean;
      import org.springframework.context.annotation.Configuration;
      import org.springframework.web.client.RestTemplate;

      @Configuration
      public class AppConfig {
          @Bean
          public RestTemplate restTemplate() {
              return new RestTemplate();
          }
      }
    after: |
      import jakarta.enterprise.context.ApplicationScoped;
      import jakarta.enterprise.inject.Produces;
      import org.springframework.web.client.RestTemplate;

      @ApplicationScoped
      public class AppConfig {
          @Produces
          @ApplicationScoped
          public RestTemplate restTemplate() {
              return new RestTemplate();
          }
      }
    language: java
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.ValueToCdiConfigProperty
examples:
- description: '`ValueToCdiConfigPropertyTest#migrateValueToConfigProperty`'
  sources:
  - before: |
      import org.springframework.beans.factory.annotation.Value;

      class ConfigService {
          @Value("${app.name}")
          private String appName;

          @Value("${app.timeout:30}")
          private int timeout;
      }
    after: |
      import org.eclipse.microprofile.config.inject.ConfigProperty;

      class ConfigService {
          @ConfigProperty(name = "app.name")
          private String appName;

          @ConfigProperty(name = "app.timeout", defaultValue = "30")
          private int timeout;
      }
    language: java
---
type: specs.openrewrite.org/v1beta/example
recipeName: org.openrewrite.quarkus.spring.WebToJaxRs
examples:
- description: '`WebToJaxRsTest#convertRestController`'
  sources:
  - before: |
      import org.springframework.web.bind.annotation.RestController;
      import org.springframework.web.bind.annotation.GetMapping;

      @RestController
      public class UserController {

          @GetMapping("/users")
          public String getUsers() {
              return "users";
          }
      }
    after: |
      import jakarta.ws.rs.GET;
      import jakarta.ws.rs.Path;

      @Path("")
      public class UserController {

          @GET
          @Path("/users")
          public String getUsers() {
              return "users";
          }
      }
    language: java
